<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&family=Exo+2:ital,wght@0,100..900;1,100..900&family=Martel+Sans:wght@200;300;400;600;700;800;900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <link rel="stylesheet" href="tracker.css">
  </head>
  <body>
    <div class="header">
        <p class="m-0">Expense<br>Tracker
        <img src="./expense.jpg" alt="img not loaded" height="35px" width="35px"></p>
    </div>
    <div class="form">

        <div class="form-floating input">
            <input type="text" class="form-control amountInput" id="floatingInput" placeholder="name@example.com">
            <label for="floatingInput">Amount</label>
          </div>
          <select class="form-select input transactionType" aria-label="Default select example">
            <option selected>Transaction Type</option>
            <option value="Income">Income</option>
            <option value="Expense">Expense</option>
          </select>
          <div class="form-floating input">
            <input type="date" class="form-control dateInput" id="floatingInput" placeholder="name@example.com">
            <label for="floatingInput">Date</label>
          </div>
          <button class="btn" id="add-btn" onclick="addRow()">+</button>

    </div>
    <div class="cards">
        <div class="card" >
            <div class="card-body">
              <h5 class="card-title m-0">Total Income
                <img src="./wallet.png" width="35px"  class="white-img">
              </h5>
              <h1 class="m-0">
                <img src="./currency.jpg" alt="" width="35px">
                <span id="totalIncome" class="m-0">0</span>
              </h1>
            </div>
          </div>
          <div class="card" >
            <div class="card-body">
              <h5 class="card-title m-0">Total Expense
                <img src="./expense.jpg" width="35px"  >
              </h5>
              <h1 class="m-0">
                <img src="./currency.jpg" alt="" width="35px">
                <span id="expense" class="m-0">0</span>
              </h1>
            </div>
          </div>
          <div class="card">
            <div class="card-body">
              <h5 class="card-title m-0">Balance
                <img src="./wallet.png" width="35px"  class="white-img">
              </h5>
              <h1 class="m-0">
                <img src="./currency.jpg" alt="" width="35px">
                <span id="balance" class="m-0">0</span>
              </h1>
            </div>
          </div>   
    </div>
    <table class="transaction-table mt-3" id="table">
        <tr id="header-row">
            <th>Amount</th>
            <th>Transaction Type</th>
            <th>Transaction Date</th>
            <th>Action</th>
        </tr>
        
    </table>
    <script>
      let table=document.getElementById("table")

      function deleteRow(row){
          row.remove()
      }

       function addRow(){
        let date=document.getElementsByClassName("dateInput")[0].value
        let amount=document.getElementsByClassName("amountInput")[0].value
        let transaction=document.getElementsByClassName("transactionType")[0].value
        
        let row=document.createElement("tr")
        let amountCell=document.createElement("td")
        amountCell.innerText=amount

        let TransactionCell=document.createElement("td")
        TransactionCell.innerText=transaction

        let dateCell=document.createElement('td')
        dateCell.innerText=date

        let binCell=document.createElement('td')

        let deleteButton=document.createElement('button')
        let binImage=document.createElement('img')
        binImage.src="./image.png"
        binImage.style.width="45px"
        binImage.style.height="45px"
        binImage.classList.add('dlt-btn')
        binImage.classList.add('btn-md')
        binImage.classList.add('btn')
        

        // binImage.classList.add('dlt-btn')
        deleteButton.appendChild(binImage)
        
        deleteButton.onclick=()=>deleteRow(row)//elaa arrow function use cheydam valla function automatic ga call avvodhu

        // binImage.style.background="red"
        // binImage.style.borderRadius="50%"
        // binImage.style.border="1px solid black"
        


        binCell.appendChild(deleteButton)

        
        row.appendChild(amountCell)
        row.appendChild(TransactionCell)
        row.appendChild(dateCell)
        row.appendChild(binCell)
        if((dateCell==" ") &&(TransactionCell=" ") && (amountCell==" ")){
             
        }
        else{
          table.appendChild(row)
        }
        


       let totalIncome=document.getElementById('totalIncome').innerText
       let totalExpense=document.getElementById('expense').innerText
       let balance=document.getElementById('balance').innerText
       if(transaction=="Income"){
        if(totalIncome=='0'){
          document.getElementById('totalIncome').innerText=amount
        }
        else{
          document.getElementById('totalIncome').innerText=parseInt(totalIncome)+parseInt(amount)
        }
        if(balance=="0"){
          document.getElementById('balance').innerText=amount
        }
        else{
          document.getElementById('balance').innerText=parseInt(balance)+parseInt(amount)
          }
       }
       else if(transaction=="Expense"){
        if(totalExpense=="0"){
          document.getElementById('expense').innerText=amount
        }
        else{
          document.getElementById('expense').innerText=parseInt(amount)+parseInt(totalExpense)
        }
        if(balance=="0"){
          document.getElementById('balance').innerText=amount
        }
        else{
          document.getElementById('balance').innerText=parseInt(balance)-parseInt(amount)
          }
        
       }
       

       }
      
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.min.js" integrity="sha384-VQqxDN0EQCkWoxt/0vsQvZswzTHUVOImccYmSyhJTp7kGtPed0Qcx8rK9h9YEgx+" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
  </body>
</html>